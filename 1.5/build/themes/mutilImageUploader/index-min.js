/*!build time : 2013-09-15 2:59:41 PM
*/KISSY.add("gallery/uploader/1.5/themes/mutilImageUploader/index",function(a,b,c){function d(a){var b=this;d.superclass.constructor.call(b,a)}var e=b.all;return a.extend(d,c,{render:function(){var a=this;d.superclass.render.call(a);var b=a.get("uploader");b.on("remove",function(){a._changeText()}),b.on("success",function(){a._changeText()});var c=b.get("target"),e=c.text();a.set("defaultText",e)},_addHandler:function(a){var b=this,c=a.file,d=c.id,f=e(".J_Del_"+d);f.data("data-file",c),f.on("click",b._delHandler,b);var g=e(".J_Pic_"+d);g.show(),b.preview(g)},_progressHandler:function(a){var b=Math.ceil(100*a.loaded/a.total),c=a.file.id,d=e("#queue-file-"+c);e(".current-progress",d).html(b+"%"),e(".progress-bar",d).css("border","1px solid #336699")},_successHandler:function(b){var c=b.file.id,d=e("#queue-file-"+c),f=b.result,g=this.get("uploader"),h=g.getPlugin("auth");if(f.status){e(".J_ZoomPic",d).attr("data-zoom-img",b.file.sUrl),e(".file-preview",d).removeClass("hidden"),e(".current-progress",d).html("100%").addClass("complete").removeClass("progress");var g=this.get("uploader"),i=g.get("queue"),j=i.getFiles("success").length;e("#J_UploadNum").html("\u5df2\u4e0a\u4f20"+j+"\u5f20\uff0c\u8fd8\u53ef\u4ee5\u4e0a\u4f20"+(h.get("max")-j)+"\u5f20")}else e(".current-progress",d).html("0%").removeClass("complete").removeClass("progress"),e(".progress-bar",d).css("border","1px solid #ccc");var d=g.get("queue");a.each(d.get("files"),function(b,e){b.id===c&&e==d.get("files").length-2&&a.later(function(){h._maxStopUpload()},1e3)})},_errorHandler:function(a){var b=a.msg||a.result.msg,c=a.file,d=c.id;e(".J_ErrorMsg_"+d).html(b)},_changeText:function(){var b=this,c=b.get("uploader"),d=b.getFilesLen(),e=c.get("target"),f=e.children("span"),g=b.get("maxText"),h=b.get("defaultText"),i=c.get("max");Number(i)<=d?f.text(a.substitute(g,{max:i})):f.text(h)}},{ATTRS:{name:{value:"refundUploader"},use:{value:"proBars,filedrop,preview,imageZoom"},defaultText:{value:"\u70b9\u51fb\u4e0a\u4f20\u56fe\u7247"},maxText:{value:"\u60a8\u5df2\u4e0a\u4f20\u6ee1{max}\u5f20\u56fe\u7247"}}}),d},{requires:["node","gallery/gallery/uploader/1.5/themes/imageUploader/index"]});